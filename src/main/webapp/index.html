<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:widget="http://www.netvibes.com/ns/">

<head>
	<meta charset="UTF-8">
	<title> Sender 2 </title>
	
    <meta name="author" content="Rashid Williams-Garcia">
	<meta name="description" content="send data from this widget...">
</head>


<script type="text/javascript">
	function sendFunc() {
		var inputVal = document.getElementById("data").value;	
		console.log("took input val of " + inputVal);
	
		require(["DS/PlatformAPI/PlatformAPI"], function(API){	//uses PlatformAPI method publish with topic "display" to send data
			API.publish("display", inputVal);					//inputVal to receiver.js, which will be captured by method subscribe
		});														//of the same topic, calling receiveFunc when the data is received.
	
		console.log("sent!");
	}
	
	var MyWidget = {
		onLoad: function(){console.log("loading...");},
	};
	
	widget.addEvent("onLoad", MyWidget.onLoad);
	
	myButton = document.getElementById("sendButton");
	myButton.addEventListener("click", sendFunc);	//waits for click event to run sendFunc
</script>


<body>

	<h1> Sender </h1>
    
    <form id="dataForm">
        <label for="prenom">Data :</label><br>
        <input type="text" id="data" name="data">
    </form>
    <button id="sendButton">
        Send
    </button>
    
</body>
</html>